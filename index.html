<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Goal-Based Stock Trading Bot (Paper)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;
  font-family:system-ui,Segoe UI,Roboto,Arial;
  background:#0f1220;
  color:#fff;
}
.container{
  max-width:1000px;
  margin:auto;
  padding:24px;
}
.card{
  background:#171b34;
  border-radius:16px;
  padding:20px;
  margin-bottom:18px;
  box-shadow:0 12px 30px rgba(0,0,0,.4);
}
h1,h2{margin:0 0 10px}
label{font-size:13px;color:#aaa}
input,select,button{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  background:#23285a;
  color:#fff;
  font-size:14px;
}
button{
  cursor:pointer;
  background:linear-gradient(135deg,#4ef0c2,#4c8cff);
  font-weight:700;
}
button.secondary{
  background:#2a2f66;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:14px;
}
.stat{
  background:#202560;
  border-radius:14px;
  padding:14px;
}
.stat small{color:#aaa}
.stat div{font-size:18px;font-weight:700}
.log{
  max-height:260px;
  overflow:auto;
  font-size:13px;
}
.log div{
  padding:6px 0;
  border-bottom:1px solid #2b2f6d;
}
.good{color:#55f7b3}
.bad{color:#ff6b6b}
.warn{color:#ffd36b}
</style>
</head>

<body>
<div class="container">

<h1>üìà Goal-Based Stock Trading Bot</h1>
<p style="color:#aaa">Automated paper trading driven by profit target & time horizon</p>

<div class="card">
<h2>Trading Setup</h2>
<div class="grid">
  <div>
    <label>Stock Symbol</label>
    <input id="symbol" value="AAPL">
  </div>
  <div>
    <label>Starting Balance ($)</label>
    <input id="balanceInput" type="number" value="10">
  </div>
  <div>
    <label>Trade Amount ($ per trade)</label>
    <input id="tradeSize" type="number" value="2">
  </div>
  <div>
    <label>Profit Goal ($)</label>
    <input id="profitGoal" type="number" value="1">
  </div>
  <div>
    <label>Time Span (days)</label>
    <input id="days" type="number" value="7">
  </div>
</div>
</div>

<div class="card">
<h2>Live Stats</h2>
<div class="grid">
  <div class="stat"><small>Price</small><div id="price">$‚Äî</div></div>
  <div class="stat"><small>Balance</small><div id="balance">$‚Äî</div></div>
  <div class="stat"><small>Equity</small><div id="equity">$‚Äî</div></div>
  <div class="stat"><small>Profit</small><div id="profit">$‚Äî</div></div>
  <div class="stat"><small>Status</small><div id="status" class="warn">WAITING</div></div>
</div>
</div>

<div class="card">
<button id="start">‚ñ∂ Start Automation</button>
<button id="stop" class="secondary">‚èπ Stop</button>
</div>

<div class="card">
<h2>Trade Log</h2>
<div class="log" id="log"></div>
</div>

</div>

<script>
let cash=0, shares=0, entry=0;
let startTime, targetProfit, runDays;
let timer=null;
let prices=[];

function log(msg,cls=""){
  const d=document.createElement("div");
  d.className=cls;
  d.textContent=new Date().toLocaleTimeString()+" ‚Äî "+msg;
  document.getElementById("log").prepend(d);
}

async function fetchPrice(sym){
  const url=`https://stooq.com/q/l/?s=${sym.toLowerCase()}&f=sd2t2ohlcv&h&e=csv`;
  const r=await fetch(url);
  const t=await r.text();
  const rows=t.split("\n");
  if(rows.length<2)return null;
  return parseFloat(rows[1].split(",")[3]);
}

function updateStats(price){
  document.getElementById("price").textContent="$"+price.toFixed(2);
  document.getElementById("balance").textContent="$"+cash.toFixed(2);
  const eq=cash+shares*price;
  document.getElementById("equity").textContent="$"+eq.toFixed(2);
  document.getElementById("profit").textContent="$"+(eq - startBalance).toFixed(2);
}

let startBalance=0;

async function step(){
  const sym=document.getElementById("symbol").value;
  const tradeAmt=parseFloat(document.getElementById("tradeSize").value);
  const price=await fetchPrice(sym);
  if(!price)return;

  prices.push(price);
  if(prices.length>20)prices.shift();

  updateStats(price);

  const equity=cash+shares*price;
  const profit=equity-startBalance;
  const elapsed=(Date.now()-startTime)/(1000*60*60*24);

  if(profit>=targetProfit){
    document.getElementById("status").textContent="GOAL HIT";
    log("üéØ Profit target reached","good");
    stop();
    return;
  }

  if(elapsed>=runDays){
    document.getElementById("status").textContent="TIME UP";
    log("‚è∞ Time window ended","warn");
    stop();
    return;
  }

  if(prices.length<5)return;

  const avg=prices.reduce((a,b)=>a+b,0)/prices.length;

  if(price>avg && cash>=tradeAmt){
    const qty=tradeAmt/price;
    shares+=qty;
    cash-=tradeAmt;
    entry=price;
    log(`BUY ${qty.toFixed(4)} @ $${price.toFixed(2)}`,"good");
  }

  if(shares>0 && price>entry*1.01){
    cash+=shares*price;
    log(`SELL ${shares.toFixed(4)} @ $${price.toFixed(2)}`,"bad");
    shares=0;
  }
}

function start(){
  cash=parseFloat(document.getElementById("balanceInput").value);
  startBalance=cash;
  targetProfit=parseFloat(document.getElementById("profitGoal").value);
  runDays=parseFloat(document.getElementById("days").value);
  startTime=Date.now();
  prices=[];
  shares=0;
  document.getElementById("status").textContent="RUNNING";
  log("Automation started");
  timer=setInterval(step,15000);
}

function stop(){
  clearInterval(timer);
  timer=null;
}

document.getElementById("start").onclick=start;
document.getElementById("stop").onclick=stop;
</script>
</body>
</html>
